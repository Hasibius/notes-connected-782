<div id="top" class="container">
  <%= link_to :back do %>
    <i class="fas fa-solid fa-angle-left my-3 mx-0 secondary-button"> Back</i>
  <% end %>

  <br>
  <div class="row">
    <div class="col-md-8" style="padding: 0 !important;">
      <% if @event.photo.key %>
        <%= cl_image_tag(@event.photo.key) %>
      <% end %>
    </div>
    <div class="col-md-4">
      <p><%= @event.date.strftime('%B %e').upcase %></p>
      <h1><%= @event.title %></h1>
      <p>from <%= link_to @user.user_name, dashboard_path(@user) %></p>
      <p><a href="#map-box"><i class="fas fa-map-marker-alt"> <%= @event.address %></i></a></p>
      <% # if association exists show i dont attend button %>
      <% if @clicked %>
        <%= link_to "I won't make it... ☹️", delete_attendance_path(@event), method: :delete, class: 'secondary-button m-3' %>
        <br><br>
      <% else %>
        <%= link_to "I 'm going!", create_attendance_path(@event), method: :post, class: 'primary-button m-3' %>
        <br><br>
      <% end %>
    </div>
  </div>
  <hr>
  <div class="row mt-3">
    <div class="col-md-8">
      <h6><%= @event.title %></h6>
      <h4>About this event</h4>
      <p>Genre: <%= link_to @genre.name, genre_path(@genre) %></p>
      <p><%= @event.details %></p>
    </div>
    <div class="col-md-4">
      <p>Date and time</p>
      <p><%= @event.date.strftime('%a, %d.%m.%Y %l:%M %p') %></p>
      <p><%= pluralize(@attendance, 'person')%> going</p>
    </div>
  </div>
  <div
    id ="map-box"
    class="my-3"
    style="width: 100%; height: 600px;"
    data-controller="mapbox"
    data-mapbox-markers-value="<%= @markers.to_json %>"
    data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
  <%# <a href="#top" class="text-center mb-5">Back to top</a> %>
  <%= link_to 'Back to top', '#top', class: 'text-center mb-5' %>
</div>
